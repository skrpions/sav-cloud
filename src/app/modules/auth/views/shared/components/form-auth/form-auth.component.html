<div class="login-page">
  <!-- Background Image Section (solo parte superior) -->
  <div class="login-page__background"></div>

  <!-- Header Navigation -->
  <header class="login-page__header">
    <div class="header-nav">
      <div class="header-nav__brand">
        <span>SAV PRO</span>
      </div>
      <div class="header-nav__actions">
        <!-- <button mat-button class="header-nav__button">Buy Now</button> -->
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <div class="login-page__content">
    <div class="login-wrapper">
      <!-- Auth Card -->
      <mat-card class="login-card">
        <div class="login-card__header">
          <h1 class="login-card__title">{{ config.title }}</h1>
          <p class="login-card__subtitle">{{ config.subtitle }}</p>
        </div>

        <mat-card-content class="login-card__content">
          <form [formGroup]="authForm" (ngSubmit)="onSubmit()" class="login-form">

            <!-- Email Field -->
            <mat-form-field appearance="fill" class="login-form__field">
              <mat-label>Email</mat-label>
              <input
                matInput
                type="email"
                formControlName="email"
                placeholder="john@email.com"
              >
              @if (isFieldRequired(authForm, 'email')) {
                <mat-error>Email is required</mat-error>
              }
              @if (isEmailInvalid(authForm)) {
                <mat-error>Please enter a valid email</mat-error>
              }
            </mat-form-field>

            <!-- Password Field -->
            <mat-form-field appearance="fill" class="login-form__field">
              <mat-label>Password</mat-label>
              <input
                matInput
                [type]="hidePassword ? 'password' : 'text'"
                formControlName="password"
                placeholder="••••••••••"
              >
              <button
                mat-icon-button
                matSuffix
                type="button"
                (click)="togglePasswordVisibility()"
                [attr.aria-label]="'Hide password'"
                [attr.aria-pressed]="hidePassword"
              >
                <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
              </button>
              @if (isFieldRequired(authForm, 'password')) {
                <mat-error>Password is required</mat-error>
              }
              @if (isPasswordMinLengthInvalid(authForm)) {
                <mat-error>Password must be at least 6 characters</mat-error>
              }
            </mat-form-field>

            <!-- Remember Me Checkbox (solo para login) -->
            @if (config.showRememberMe) {
              <div class="login-form__checkbox-container">
                <mat-checkbox formControlName="rememberMe" color="primary" class="login-form__checkbox">
                  Remember me
                </mat-checkbox>
              </div>
            }

            <!-- Terms Checkbox (solo para registro) -->
            @if (config.showTermsCheckbox) {
              <div class="login-form__checkbox-container">
                <mat-checkbox formControlName="checkTerms" color="primary" class="login-form__checkbox" [required]="true">
                  I agree to the <a href="#" class="login-form__signup-link">Terms and Conditions</a>
                </mat-checkbox>
              </div>
            }

            <!-- Submit Button -->
            <button type="submit" mat-raised-button color="primary" class="wide-form-field auth-submit-button" [disabled]="authForm.invalid">
              <span class="button-content">
                <span class="button-text">{{ config.submitButtonText }}</span>
                <mat-icon>send</mat-icon>
              </span>
            </button>

            <!-- Navigation Link -->
            <div class="login-form__signup-container">
              <span class="login-form__signup-text">{{ config.linkText }}</span>
              <a [routerLink]="config.linkRoute" class="login-form__signup-link">{{ config.linkLabel }}</a>
            </div>
          </form>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <!-- Footer -->
  <footer class="login-page__footer page-footer">
    <div class="page-footer__content">
      <span>© 2025, made with ❤️ by </span>
      <a href="#" class="page-footer__link">Eng. Nestor Martínez C.</a>
      <span> for a better web.</span>
    </div>
    <div class="page-footer__links">
      <a href="#" class="page-footer__link page-footer__link--secondary">Creative Tim</a>
      <a href="#" class="page-footer__link page-footer__link--secondary">About Us</a>
      <a href="#" class="page-footer__link page-footer__link--secondary">Blog</a>
      <a href="#" class="page-footer__link page-footer__link--secondary">License</a>
    </div>
  </footer>
</div> 